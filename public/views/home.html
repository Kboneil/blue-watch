<h2>Home/Map Page</h2>
<p>
  <a href="/login">Login</a>
</p>
<div class="row">
  <div id="input" class="col-sm-10">
    <input type="text" class="form-control" placeholder="What are you looking for?" ng-model="home.search">
  </div>
  <div id="button" class="col-sm-2">
    <button type="submit" class="btn btn-default" id="submit" ng-click="home.searchResources(home.search)">Search</button>
  </div>
</div>
<br />
<div class="row">
  <div class="col-sm-5">
    <div class="row">
      <div>
        <div class="col-sm-6">
          <input type="text" id="address-input" placeholder="get an address" class="form-control">

        </div>
        <div class="col-sm-3">
          <button ng-click="home.searchAddress()" class="btn btn-default">Search</button>

        </div>
      </div>
    </div>

<div ng-if="home.search">
  <button class="btn btn-default" ng-click="home.backCategories()">back</button>
    <div ng-repeat="resource in home.resources | filter: home.search">
      <h3>{{resource.category.categoryName}}</h3>
      <p>{{resource.company}}</p>
      <p>{{resource.description}}</p>
      <p>{{resource.contact}}</p>
    </div>
</div>

<div ng-if="!home.search">

    <div id="categoryList" ng-hide="home.change.categoryList">
      <div ng-repeat="resource in home.resources | unique:'category'">
        <div>
          <form>
            <input type="checkbox" ng-model="home.checked[$index]" ng-true-value="'{{resource.category.categoryName}}'"/>

            <label value="resource.categoryName" ng-click="home.expandCategory(resource.category.categoryName)">{{resource.category.categoryName}}</label>

            <label value="resource.category.categoryName" ng-click="home.expandCategory(resource.category.categoryName)">{{resource.category.categoryName}}<span class="glyphicon glyphicon-menu-right"></span></label>


          </form>
        </div>
      </div>
      <button class="btn btn-default" ng-click="home.expandCheckedCategory(home.checked)" ng-hide="!home.checked">Submit</button>
    </div>

    <div id="selectedCategory" ng-show="home.change.selectedCategory">
        <button class="btn btn-default" ng-click="home.backCategories()">back</button>
        <h3>{{home.selectedCategoryArray[0].category.categoryName}}</h3>
      <div id="class" ng-repeat="resource in home.selectedCategoryArray | orderBy : 'company'">
        <a ng-if="resource.marker.boundsStatus" type="button" href="#" ng-click="home.openInfoWindow($event, resource.marker)"><h5>{{resource.company}}</h5></a>
        <p ng-if="resource.marker.boundsStatus">{{resource.description}}</p>
        <p ng-if="resource.marker.boundsStatus">{{resource.contact}}</p>
        <a ng-if="resource.marker.boundsStatus" href="{{resource.website}}">Website</a>
        <div>
        <a ng-if="resource.marker.boundsStatus" href="#addReview" ng-click="home.getId(resource._id)" data-toggle="modal"><span class="glyphicon glyphicon-star-empty"></span>Give a review</a>
      </div>
      <div ng-repeat="review in resource.reviews">
          <p ng-if="resource.marker.boundsStatus">{{review.comments}}</p>
          <p ng-if="resource.marker.boundsStatus">{{review.rating}} stars</p>
      </div>
      </div>
    </div>

    <div id="checkedCategory" ng-show="home.change.checkedCategory">
        <button class="btn btn-default" ng-click="home.backCategories()">back</button>
      <div ng-repeat="category in home.checkedCategory">
        <h3>{{category.name}}</h3>
        <div ng-repeat="resource in category.resources">
          <a ng-if="resource.marker.boundsStatus" href="#" ng-click="home.openInfoWindow($event, resource.marker)"><h5>{{resource.company}}</h5></a>
          <p ng-if="resource.marker.boundsStatus" >{{resource.description}}</p>
          <p ng-if="resource.marker.boundsStatus">{{resource.contact}}</p>
          <a ng-if="resource.marker.boundsStatus" href="{{resource.website}}">Website</a>
          <div>
          <a ng-if="resource.marker.boundsStatus" href="#addReview" ng-click="home.getId(resource._id)" type="button" data-toggle="modal"><span class="glyphicon glyphicon-star-empty"></span>Give a review</a>
          </div>
          <div ng-repeat="review in resource.reviews">
              <p ng-if="resource.marker.boundsStatus">{{review.comments}}</p>
              <p ng-if="resource.marker.boundsStatus">{{review.rating}} stars</p>
          </div>
          </div>
      </div>
    </div>

</div>
  </div>

  <div class="col-sm-7">
    <div id="map" style="height:300px;">
    </div>
  </div>

  <div id="addReview" class="modal fade">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                  <h4 class="modal-title text-center">Review Resource</h4>
              </div>
              <div class="modal-body modal-background-color">
                  <form class="form-horizontal">
                      <div class="form-group">
                        <div class="row">
                          <label class="control-label col-xs-2">Rating</label>
                          <div class="col-xs-8 text-align:left;">
                            <ul id="el" style="list-style-type: none;"></ul>
                          </div>
                        </div>
                        <div class="row">
                          <label class="control-label col-xs-2">Comments</label>
                          <div class="col-xs-8">
                              <textarea ng-model="home.reviewNotes" type="text" class="form-control" ></textarea>
                          </div>
                      </div>
                    </div>
              </form>
              </div>
              <div class="modal-footer">
                  <button ng-click="home.createReview(home.reviewNotes)" type="button" class="btn btn-primary" data-dismiss="modal" >Submit Review</button>
              </div>

          </div>
      </div>
  </div>




</div>
